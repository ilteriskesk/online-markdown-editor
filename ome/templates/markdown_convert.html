{% extends "base.html" %}

{% block ust_icerik %}
    <script type="text/javascript" rel="script">
        $(document).ready(function () {


            $(".content").on('keyup', function (e) {
                var $this = $(this);
                var data = $this.val();
                var span = $('.gelen_yazi');
                $.ajax({
                    type: "POST",
                    url: '',
                    data: {'markdown_text': data, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
                    dataType: 'json',
                    success: function (data) {
                        console.log("gelen:", data);
                        span.html(data.markdown_text)
                    }
                });

            })
        });


    </script>


{% endblock %}

{% block body %}

    <center>

        <div class="row">
            <div class="col-lg-12">
                <div class="col-lg-9">

                    <form class="form" action="{% url 'markdown-save' %}" method="POST">
                        {% csrf_token %}
                        {% for field in form %}
                            {{ field.label }}
                            {{ field }}
                        {% endfor %}

                        <br>

                        <input class="goruntule btn btn-success" type="submit" name="view" value="Görüntüle">
                        {% if request.user.is_authenticated %}
                            <input class="btn btn-danger" type="submit" name="save" value="Kaydet">
                        {% endif %}
                    </form>
                    {{ new_ome.html_text | safe }}


                </div>


            </div>

        </div>
        <br>

        <div class="col-lg-9">
            <p class="text-info"> Markdown yazısı: </p>
            <span class="text-dark gelen_yazi"></span>
        </div>


    </center>

{% endblock body %}